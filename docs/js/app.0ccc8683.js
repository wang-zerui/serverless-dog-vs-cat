(function(){"use strict";var e={6324:function(e,t,n){var o=n(9242),a=n(4876),l=(n(2467),n(3396));const r=(0,l._)("div",{class:"logo"},null,-1),u=(0,l.Uk)(" 经典猫狗识别 "),i={key:0},d={class:"ant-upload-drag-icon"},s=(0,l._)("p",{class:"ant-upload-text"}," Serverless实例正在识别，TensorFlow加载时间会比较长，但是不会超过两分钟... ",-1),c={key:1},f={class:"ant-upload-drag-icon"},p=(0,l._)("p",{class:"ant-upload-text"}," 点击或拖动图片到这个区域 ",-1),g=(0,l.Uk)(" 保存 "),v=["src"],m=(0,l.Uk)("正确"),h=(0,l.Uk)("错误"),b=(0,l.Uk)(" xinwuyun ©2022 Powerd by serverless and animeGAN2 ");function y(e,t,n,o,a,y){const w=(0,l.up)("a-layout-header"),_=(0,l.up)("loading-outlined"),k=(0,l.up)("a-progress"),x=(0,l.up)("inbox-outlined"),O=(0,l.up)("a-upload-dragger"),P=(0,l.up)("a-button"),j=(0,l.up)("a-card"),W=(0,l.up)("a-space"),S=(0,l.up)("a-layout-content"),Z=(0,l.up)("a-layout-footer"),U=(0,l.up)("a-layout");return(0,l.wg)(),(0,l.j4)(U,{class:"layout"},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{style:{position:"fixed",zIndex:1,width:"100%",color:"white",fontSize:"16px"}},{default:(0,l.w5)((()=>[r,u])),_:1}),(0,l.Wm)(S,{style:{padding:"0 400px",marginTop:"80px"}},{default:(0,l.w5)((()=>[(0,l.Wm)(j,null,{default:(0,l.w5)((()=>[(0,l.Wm)(O,{ref:"up",name:"file",customRequest:e.upload,onDrop:e.handleDrop,disabled:e.loading},{default:(0,l.w5)((()=>[e.loading?((0,l.wg)(),(0,l.iD)("div",i,[(0,l._)("p",d,[(0,l.Wm)(_)]),(0,l.Wm)(k,{percent:e.defaultPercent},null,8,["percent"]),s])):((0,l.wg)(),(0,l.iD)("div",c,[(0,l._)("p",f,[(0,l.Wm)(x)]),p]))])),_:1},8,["customRequest","onDrop","disabled"]),e.imageUrl?((0,l.wg)(),(0,l.j4)(W,{key:0,class:"result",direction:"vertical"},{default:(0,l.w5)((()=>[(0,l.Wm)(j,{title:"原图"},{extra:(0,l.w5)((()=>[(0,l.Wm)(P,null,{default:(0,l.w5)((()=>[g])),_:1})])),default:(0,l.w5)((()=>[(0,l._)("img",{src:e.imageUrl,alt:"",style:{"max-height":"200px"}},null,8,v)])),_:1}),""!=e.result?((0,l.wg)(),(0,l.j4)(j,{key:0,title:`它是${e.result}，这个结果正确吗?`,style:{width:"100%"}},{default:(0,l.w5)((()=>[(0,l.Wm)(W,null,{default:(0,l.w5)((()=>[(0,l.Wm)(P,{loading:e.loading2,disabled:e.disabled,onClick:t[0]||(t[0]=t=>e.label(!0)),type:"primary"},{default:(0,l.w5)((()=>[m])),_:1},8,["loading","disabled"]),(0,l.Wm)(P,{loading:e.loading2,disabled:e.disabled,onClick:t[1]||(t[1]=t=>e.label(!1)),type:"error"},{default:(0,l.w5)((()=>[h])),_:1},8,["loading","disabled"])])),_:1}),(0,l.Wm)(P)])),_:1},8,["title"])):(0,l.kq)("",!0)])),_:1})):(0,l.kq)("",!0)])),_:1})])),_:1}),(0,l.Wm)(Z,{style:{textAlign:"center"}},{default:(0,l.w5)((()=>[b])),_:1})])),_:1})}var w=n(8269),_=n(2510),k=n(252),x=n(4870),O=(0,l.aZ)({components:{InboxOutlined:w.Z,LoadingOutlined:_.Z},setup(){const e=(0,x.iH)(null),t=(0,x.iH)(""),n=(0,x.iH)(0),o=(0,x.iH)(""),a=(0,x.iH)(!1),l=(0,x.iH)(!1),r=(0,x.iH)(!1),u=()=>{e.value=null,t.value="",o.value="",a.value=!1,r.value=!1},i=async n=>{u(),a.value=!0,t.value="";const l=new FileReader;let r=n.file;return l.readAsDataURL(r),l.onloadend=function(l){const r=l.target.result.toString().split(",")[1];if(t.value=`data:image/jpg;base64, ${r}`,l&&l.target&&l.target.result){var u=JSON.stringify({image:r}),i={method:"POST",body:u};fetch("https://1893791694056142.cn-hangzhou.fc.aliyuncs.com/2016-08-15/proxy/cloud-homework/dog-vs-cat-predict/dog-vs-cat",i).then((e=>e.json())).then((t=>{let{dog:l,cat:r,code:u}=t;if(l=parseFloat(l),r=parseFloat(r),console.log(l),console.log(r),"0"!=u)return k.ZP.error("Failed to identify."),e.value.abort(),void n.onError();o.value=l>r?"狗":"猫",a.value=!1,k.ZP.success("识别成功"),n.onSuccess()})).catch((t=>{k.ZP.error(`API error ${t}`),e.value.abort(),n.onError()}))}},!0},d=e=>{let n;l.value=!0,n="狗"==o.value?e?"dog":"cat":e?"cat":"dog";const a=t.value.split(", ")[1];var u=JSON.stringify({image:a,label:n}),i={method:"POST",body:u};fetch("https://dog-vs-t-upload-cloud-homework-azkjfipaes.cn-hangzhou.fcapp.run/upload",i).then((e=>e.json())).then((e=>{let{code:t}=e;0==t?(l.value=!1,k.ZP.success("提交成功"),r.value=!0):k.ZP.error("Failed to label this image.")})).catch((e=>{l.value=!1,k.ZP.error(`API error ${e}`)}))};return{title:"猫狗识别工具",up:e,imageUrl:t,defaultPercent:n,result:o,loading:a,loading2:l,upload:i,label:d,disabled:r,fileList:(0,x.iH)([]),handleDrop:e=>{console.log(e)}}}}),P=n(89);const j=(0,P.Z)(O,[["render",y]]);var W=j;const S=(0,o.ri)(W);S.use(a.ZP).mount("#app")}},t={};function n(o){var a=t[o];if(void 0!==a)return a.exports;var l=t[o]={exports:{}};return e[o].call(l.exports,l,l.exports,n),l.exports}n.m=e,function(){var e=[];n.O=function(t,o,a,l){if(!o){var r=1/0;for(s=0;s<e.length;s++){o=e[s][0],a=e[s][1],l=e[s][2];for(var u=!0,i=0;i<o.length;i++)(!1&l||r>=l)&&Object.keys(n.O).every((function(e){return n.O[e](o[i])}))?o.splice(i--,1):(u=!1,l<r&&(r=l));if(u){e.splice(s--,1);var d=a();void 0!==d&&(t=d)}}return t}l=l||0;for(var s=e.length;s>0&&e[s-1][2]>l;s--)e[s]=e[s-1];e[s]=[o,a,l]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,l,r=o[0],u=o[1],i=o[2],d=0;if(r.some((function(t){return 0!==e[t]}))){for(a in u)n.o(u,a)&&(n.m[a]=u[a]);if(i)var s=i(n)}for(t&&t(o);d<r.length;d++)l=r[d],n.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return n.O(s)},o=self["webpackChunkserverless_ai"]=self["webpackChunkserverless_ai"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(6324)}));o=n.O(o)})();
//# sourceMappingURL=app.0ccc8683.js.map