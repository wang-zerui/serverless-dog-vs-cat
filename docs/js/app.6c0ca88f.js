(function(){"use strict";var e={9640:function(e,t,o){var l=o(9242),a=o(4876),n=(o(2467),o(3396)),r=o.p+"img/logo.e3ed7aa7.png";const u={key:0},i={class:"ant-upload-drag-icon"},d=(0,n._)("p",{class:"ant-upload-text"}," Serverless实例正在识别，TensorFlow加载时间会比较长，但是不会超过两分钟... ",-1),s={key:1},c={class:"ant-upload-drag-icon"},p=(0,n._)("p",{class:"ant-upload-text"}," 点击上传猫或狗的图片 ",-1),f=(0,n.Uk)(" 保存 "),g=["src"],v=(0,n.Uk)("正确"),h=(0,n.Uk)("错误"),m=(0,n.Uk)(" xinwuyun ©2022 Powerd by Aliyun serverless ");function y(e,t,o,l,a,y){const b=(0,n.up)("a-layout-header"),w=(0,n.up)("loading-outlined"),_=(0,n.up)("a-progress"),k=(0,n.up)("cloud-upload-outlined"),x=(0,n.up)("a-upload-dragger"),O=(0,n.up)("a-button"),P=(0,n.up)("a-card"),j=(0,n.up)("a-space"),W=(0,n.up)("a-layout-content"),S=(0,n.up)("a-layout-footer"),Z=(0,n.up)("a-layout");return(0,n.wg)(),(0,n.j4)(Z,{class:"layout"},{default:(0,n.w5)((()=>[(0,n.Wm)(b,{class:"header",style:{position:"fixed",zIndex:1,width:"100%",color:"white",fontSize:"16px"}},{default:(0,n.w5)((()=>[(0,n._)("img",{src:r,style:{height:"85%",float:"left"},alt:"",onClick:t[0]||(t[0]=t=>e.$router.push("/"))})])),_:1}),(0,n.Wm)(W,{style:{padding:"0 300px",marginTop:"80px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(P,{style:{minWidth:"800px"}},{default:(0,n.w5)((()=>[(0,n.Wm)(x,{ref:"up",name:"file",customRequest:e.upload,onDrop:e.handleDrop,disabled:e.loading},{default:(0,n.w5)((()=>[e.loading?((0,n.wg)(),(0,n.iD)("div",u,[(0,n._)("p",i,[(0,n.Wm)(w)]),(0,n.Wm)(_,{percent:e.defaultPercent},null,8,["percent"]),d])):((0,n.wg)(),(0,n.iD)("div",s,[(0,n._)("p",c,[(0,n.Wm)(k)]),p]))])),_:1},8,["customRequest","onDrop","disabled"]),e.imageUrl?((0,n.wg)(),(0,n.j4)(j,{key:0,class:"result",direction:"vertical"},{default:(0,n.w5)((()=>[(0,n.Wm)(P,{title:"原图"},{extra:(0,n.w5)((()=>[(0,n.Wm)(O,null,{default:(0,n.w5)((()=>[f])),_:1})])),default:(0,n.w5)((()=>[(0,n._)("img",{src:e.imageUrl,alt:"",style:{"max-height":"200px"}},null,8,g)])),_:1}),""!=e.result?((0,n.wg)(),(0,n.j4)(P,{key:0,title:`它是${e.result}，这个结果正确吗?`,style:{width:"100%"}},{default:(0,n.w5)((()=>[(0,n.Wm)(j,null,{default:(0,n.w5)((()=>[(0,n.Wm)(O,{loading:e.loading2,disabled:e.disabled,onClick:t[1]||(t[1]=t=>e.label(!0)),type:"primary"},{default:(0,n.w5)((()=>[v])),_:1},8,["loading","disabled"]),(0,n.Wm)(O,{loading:e.loading2,disabled:e.disabled,onClick:t[2]||(t[2]=t=>e.label(!1)),type:"error"},{default:(0,n.w5)((()=>[h])),_:1},8,["loading","disabled"])])),_:1}),(0,n.Wm)(O)])),_:1},8,["title"])):(0,n.kq)("",!0)])),_:1})):(0,n.kq)("",!0)])),_:1})])),_:1}),(0,n.Wm)(S,{style:{textAlign:"center"}},{default:(0,n.w5)((()=>[m])),_:1})])),_:1})}var b=o(220),w=o(2510),_=o(252),k=o(4870),x=(0,n.aZ)({components:{CloudUploadOutlined:b.Z,LoadingOutlined:w.Z},setup(){const e=(0,k.iH)(null),t=(0,k.iH)(""),o=(0,k.iH)(0),l=(0,k.iH)(""),a=(0,k.iH)(!1),n=(0,k.iH)(!1),r=(0,k.iH)(!1),u=()=>{e.value=null,t.value="",l.value="",a.value=!1,r.value=!1},i=async o=>{u(),a.value=!0,t.value="";const n=new FileReader;let r=o.file;return n.readAsDataURL(r),n.onloadend=function(n){const r=n.target.result.toString().split(",")[1];if(t.value=`data:image/jpg;base64, ${r}`,n&&n.target&&n.target.result){var u=JSON.stringify({image:r}),i={method:"POST",body:u};fetch("https://1893791694056142.cn-hangzhou.fc.aliyuncs.com/2016-08-15/proxy/cloud-homework/dog-vs-cat-predict/dog-vs-cat",i).then((e=>e.json())).then((t=>{let{dog:n,cat:r,code:u}=t;if(n=parseFloat(n),r=parseFloat(r),console.log(n),console.log(r),"0"!=u)return _.ZP.error("Failed to identify."),e.value.abort(),void o.onError();l.value=n>r?"狗":"猫",a.value=!1,_.ZP.success("识别成功"),o.onSuccess()})).catch((t=>{_.ZP.error(`API error ${t}`),e.value.abort(),o.onError()}))}},!0},d=e=>{let o;n.value=!0,o="狗"==l.value?e?"dog":"cat":e?"cat":"dog";const a=t.value.split(", ")[1];var u=JSON.stringify({image:a,label:o}),i={method:"POST",body:u};fetch("https://dog-vs-t-upload-cloud-homework-azkjfipaes.cn-hangzhou.fcapp.run/upload",i).then((e=>e.json())).then((e=>{let{code:t}=e;0==t?(n.value=!1,_.ZP.success("提交成功"),r.value=!0):_.ZP.error("Failed to label this image.")})).catch((e=>{n.value=!1,_.ZP.error(`API error ${e}`)}))};return{title:"猫狗识别工具",up:e,imageUrl:t,defaultPercent:o,result:l,loading:a,loading2:n,upload:i,label:d,disabled:r,fileList:(0,k.iH)([]),handleDrop:e=>{console.log(e)}}}}),O=o(89);const P=(0,O.Z)(x,[["render",y]]);var j=P;const W=(0,l.ri)(j);W.use(a.ZP).mount("#app")}},t={};function o(l){var a=t[l];if(void 0!==a)return a.exports;var n=t[l]={exports:{}};return e[l].call(n.exports,n,n.exports,o),n.exports}o.m=e,function(){var e=[];o.O=function(t,l,a,n){if(!l){var r=1/0;for(s=0;s<e.length;s++){l=e[s][0],a=e[s][1],n=e[s][2];for(var u=!0,i=0;i<l.length;i++)(!1&n||r>=n)&&Object.keys(o.O).every((function(e){return o.O[e](l[i])}))?l.splice(i--,1):(u=!1,n<r&&(r=n));if(u){e.splice(s--,1);var d=a();void 0!==d&&(t=d)}}return t}n=n||0;for(var s=e.length;s>0&&e[s-1][2]>n;s--)e[s]=e[s-1];e[s]=[l,a,n]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var l in t)o.o(t,l)&&!o.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.p="/"}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,l){var a,n,r=l[0],u=l[1],i=l[2],d=0;if(r.some((function(t){return 0!==e[t]}))){for(a in u)o.o(u,a)&&(o.m[a]=u[a]);if(i)var s=i(o)}for(t&&t(l);d<r.length;d++)n=r[d],o.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return o.O(s)},l=self["webpackChunkserverless_ai"]=self["webpackChunkserverless_ai"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=o.O(void 0,[998],(function(){return o(9640)}));l=o.O(l)})();
//# sourceMappingURL=app.6c0ca88f.js.map